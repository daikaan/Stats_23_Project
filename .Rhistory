mean(pred_3==test_1$Attrition_Flag)
pred_1 <- ifelse(pred_glm_5_alt > 0.7 , 1,0)
pred_2 <- ifelse(pred_glm_5_alt > 0.8 , 1,0)
pred_3 <- ifelse(pred_glm_5_alt > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
set.seed(0987)
sample_1 <- sample.split(bank_data$Attrition_Flag,SplitRatio = 0.75)
train_1 <- subset(bank_data,sample_2 == TRUE)
test_1 <- subset(bank_data,sample_2 == FALSE)
# Under-sampling
train_under <- ovun.sample(Attrition_Flag~.,data = train_1, method = "under")$data
# Over-sampling
train_over <- ovun.sample(Attrition_Flag~.,data = train_1, method = "over")$data
train_mix <- ovun.sample(Attrition_Flag~.,data = train_1, method = "both", p = 0.4, N =5311)$data
#Thresholds for classification:
threshold1 <- 0.4
threshold2 <- 0.5
threshold3 <- 0.6
glm_1 <- glm(data = train_1,Attrition_Flag~ .,family = "binomial")
summary(glm_1)
pred_glm_1 <- predict(glm_1,test_1,type="response")
pred_1 <- ifelse(pred_glm_1 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_1 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_1 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
vif(glm_1)
glm_2 <- update(glm_1, . ~ . - Education_Level - Months_on_book -Avg_Utilization_Ratio - Avg_Open_To_Buy)
summary(glm_2)
pred_glm_2 <- predict(glm_2,test_1,type="response")
pred_1 <- ifelse(pred_glm_2 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_2 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_2 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_3 <- update(glm_2, . ~ . + Total_Trans_Ct:Total_Trans_Amt + Total_Trans_Amt:Total_Relationship_Count + Total_Trans_Amt:Total_Revolving_Bal)
summary(glm_3)
pred_glm_3 <- predict(glm_3,test_1,type="response")
pred_1 <- ifelse(pred_glm_3 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_3 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_3 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_4 <- update(glm_3, . ~ . -Card_Category -Customer_Age)
summary(glm_4)
pred_glm_4 <- predict(glm_4,test_1,type="response")
pred_1 <- ifelse(pred_glm_4 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_4 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_4 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_5 <- update(glm_4, . ~ . + Is_Female:Income_Category + Is_Female:Total_Trans_Amt )
summary(glm_5)
pred_glm_5 <- predict(glm_5,test_1,type="response")
pred_1 <- ifelse(pred_glm_5 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_5 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_5 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt)
summary(glm_6)
pred_glm_6 <- predict(glm_6,test_1,type="response")
pred_1 <- ifelse(pred_glm_6 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_6 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_6 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_2_alt <- update(glm_1, . ~ . + Total_Trans_Amt:Total_Trans_Ct + Total_Trans_Amt:Total_Relationship_Count)
summary(glm_2_alt)
glm_3_alt <- update(glm_2_alt, . ~ . + Avg_Open_To_Buy:Total_Revolving_Bal + Avg_Open_To_Buy:Avg_Utilization_Ratio)
summary(glm_3_alt)
glm_4_alt <- update(glm_3_alt, . ~ . + Customer_Age:Months_on_book + Total_Revolving_Bal:Total_Trans_Ct)
summary(glm_4_alt)
glm_5_alt <- update(glm_4_alt, . ~ . - Income_Category - Card_Category - Education_Level - Marital_Status + Dependent_count:Total_Trans_Amt)
summary(glm_5_alt)
pred_glm_5_alt <- predict(glm_5_alt,test_1,type="response")
pred_1 <- ifelse(pred_glm_5_alt > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_5_alt > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_5_alt > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
pred_1 <- ifelse(pred_glm_5_alt > 0.55 , 1,0)
pred_2 <- ifelse(pred_glm_5_alt > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_5_alt > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
set.seed(0987)
sample_1 <- sample.split(bank_data_withoutNA$Attrition_Flag,SplitRatio = 0.75)
train_1 <- subset(bank_data_withoutNA,sample_1 == TRUE)
test_1 <- subset(bank_data_withoutNA,sample_1 == FALSE)
sample_2 <- sample.split(bank_data$Attrition_Flag,SplitRatio = 0.75)
train_2 <- subset(bank_data,sample_2 == TRUE)
test_2 <- subset(bank_data,sample_2 == FALSE)
#Proportion of Attrited and Existing Customer
prop.table(table(train_1$Attrition_Flag))
prop.table(table(test_1$Attrition_Flag))
prop.table(table(train_2$Attrition_Flag))
prop.table(table(test_2$Attrition_Flag))
#Original proportion of Attrited and Existing Customer
prop.table(table(bank_data$Attrition_Flag))
# Under-sampling
train_under <- ovun.sample(Attrition_Flag~.,data = train_1, method = "under")$data
# Over-sampling
train_over <- ovun.sample(Attrition_Flag~.,data = train_1, method = "over")$data
train_mix <- ovun.sample(Attrition_Flag~.,data = train_1, method = "both", p = 0.4, N =5311)$data
#Thresholds for classification:
threshold1 <- 0.4
threshold2 <- 0.5
threshold3 <- 0.6
glm_1 <- glm(data = train_1,Attrition_Flag~ .,family = "binomial")
summary(glm_1)
pred_glm_1 <- predict(glm_1,test_1,type="response")
pred_1 <- ifelse(pred_glm_1 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_1 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_1 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
vif(glm_1)
glm_2 <- update(glm_1, . ~ . - Education_Level - Months_on_book -Avg_Utilization_Ratio - Avg_Open_To_Buy)
summary(glm_2)
pred_glm_2 <- predict(glm_2,test_1,type="response")
pred_1 <- ifelse(pred_glm_2 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_2 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_2 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_3 <- update(glm_2, . ~ . + Total_Trans_Ct:Total_Trans_Amt + Total_Trans_Amt:Total_Relationship_Count + Total_Trans_Amt:Total_Revolving_Bal)
summary(glm_3)
pred_glm_3 <- predict(glm_3,test_1,type="response")
pred_1 <- ifelse(pred_glm_3 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_3 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_3 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_4 <- update(glm_3, . ~ . -Card_Category -Customer_Age)
summary(glm_4)
pred_glm_4 <- predict(glm_4,test_1,type="response")
pred_1 <- ifelse(pred_glm_4 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_4 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_4 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_5 <- update(glm_4, . ~ . + Is_Female:Income_Category + Is_Female:Total_Trans_Amt )
summary(glm_5)
pred_glm_5 <- predict(glm_5,test_1,type="response")
pred_1 <- ifelse(pred_glm_5 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_5 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_5 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt)
summary(glm_6)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt +Total_Relationship_Count*Is_Female)
summary(glm_6)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt +Total_Relationship_Count*Income_Category)
summary(glm_6)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt +Total_Relationship*Is_Female)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt +Total_Relationship_Count*Is_Female)
summary(glm_6)
glm_7 <- update(glm_6, . ~ . Total_Relationship_Count*Is_Female)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female)
summary(glm_7)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt)
summary(glm_6)
pred_glm_6 <- predict(glm_6,test_1,type="response")
pred_1 <- ifelse(pred_glm_6 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_6 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_6 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female)
summary(glm_7)
pred_glm_7 <- predict(glm_7,test_1,type="response")
pred_1 <- ifelse(pred_glm_7 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_7 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_7 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Income_Category)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_Months)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_Mon)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Contacts_Count_12_mon )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon + Total_Relationship_Count:Total_Revolving_Bal )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon  )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon + Total_Relationship_Count:Total_Trans_Ct )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon + Total_Relationship_Count:Total_Ct_Chng_Q4_Q1 )
summary(glm_7)
pred_glm_7 <- predict(glm_7,test_1,type="response")
pred_1 <- ifelse(pred_glm_7 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_7 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_7 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_7 <- update(glm_6, . ~ . + Total_Relationship_Count:Is_Female + Total_Relationship_Count:Months_Inactive_12_mon + Total_Relationship_Count:Contacts_Count_12_mon + Total_Relationship_Count:Total_Amt_Chng_Q4_Q1 )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Months_Inactive_12_mon:Total_Amt_Chng_Q4_Q1 )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Months_Inactive_12_mon:Total_Amt_Chng_Q4_Q1 )
summary(glm_6)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Contacts_Count_12_mon:Total_Amt_Chng_Q4_Q1 )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Amt_Chng_Q4_Q1 )
summary(glm_7)
View(bank_data_withoutNA)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Is_Female )
summary(glm_7)
summary(glm_6)
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Marital_Status )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Income_Category )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Relationship_Count )
summary(glm_7)
table(bank_data$Attrition_Flag)
table(bank_data$Attrition_Flag,bank_data$Gender)
table(bank_data$Attrition_Flag,bank_data$Education_Level)
table(bank_data$Attrition_Flag,bank_data$Marital_Status)
table(bank_data$Attrition_Flag,bank_data$Income_Category)
table(bank_data$Attrition_Flag,bank_data$Card_Category)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Months_Inactive_12_mon )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Contacts_Count_12_mon )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Ct_Chng_Q4_Q1 )
summary(glm_7)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Ct_Chng_Q4_Q1 )
summary(glm_7)
pred_glm_7 <- predict(glm_7,test_1,type="response")
pred_1 <- ifelse(pred_glm_7 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_7 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_7 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_8 <- update(glm_7, . ~ . + Income_Category:Dependent_count )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Marital_Status )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Relantioship_Count )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Relantioship_count )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Months_Inactive_12_mon )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Contacts_Count_12_mon )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal )
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Income_Category:Total_Amt_Chng_Q4_Q1)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Income_Category:Total_Ct_Chng_Q4_Q1)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Income_Category:Total_Trans_Amt)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal)
summary(glm_8)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_8 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_8 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_8 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_2_alt <- update(glm_1, . ~ . + Total_Trans_Amt:Total_Trans_Ct + Total_Trans_Amt:Total_Relationship_Count)
summary(glm_2_alt)
summary(glm_8)
glm_3 <- update(glm_2, . ~ . + Total_Trans_Amt:Total_Trans_Ct + Total_Trans_Amt:Total_Relationship_Count + Total_Trans_Amt:Total_Revolving_Bal)
summary(glm_3)
glm_4 <- update(glm_3, . ~ . -Card_Category -Customer_Age)
summary(glm_4)
glm_5 <- update(glm_4, . ~ . + Is_Female:Income_Category + Is_Female:Total_Trans_Amt )
summary(glm_5)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt)
summary(glm_6)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Ct_Chng_Q4_Q1 )
summary(glm_7)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal)
summary(glm_8)
glm_1 <- glm(data = train_1,Attrition_Flag~ .,family = "binomial")
summary(glm_1)
pred_glm_1 <- predict(glm_1,test_1,type="response")
pred_1 <- ifelse(pred_glm_1 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_1 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_1 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
vif(glm_1)
glm_2 <- update(glm_1, . ~ . - Education_Level - Months_on_book -Avg_Utilization_Ratio - Avg_Open_To_Buy)
summary(glm_2)
glm_3 <- update(glm_2, . ~ . + Total_Trans_Amt:Total_Trans_Ct + Total_Trans_Amt:Total_Relationship_Count + Total_Trans_Amt:Total_Revolving_Bal)
summary(glm_3)
glm_4 <- update(glm_3, . ~ . -Card_Category -Customer_Age)
summary(glm_4)
glm_5 <- update(glm_4, . ~ . + Is_Female:Income_Category + Is_Female:Total_Trans_Amt )
summary(glm_5)
glm_6 <- update(glm_5, . ~ . +Total_Amt_Chng_Q4_Q1:Total_Trans_Amt +Marital_Status:Total_Trans_Amt)
summary(glm_6)
glm_7 <- update(glm_6, . ~ . + Dependent_count:Total_Ct_Chng_Q4_Q1 )
summary(glm_7)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal)
summary(glm_8)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_8 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_8 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_8 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_2_alt <- update(glm_1, . ~ . + Total_Trans_Amt:Total_Trans_Ct + Total_Trans_Amt:Total_Relationship_Count)
summary(glm_2_alt)
glm_3_alt <- update(glm_2_alt, . ~ . + Avg_Open_To_Buy:Total_Revolving_Bal + Avg_Open_To_Buy:Avg_Utilization_Ratio)
summary(glm_3_alt)
glm_4_alt <- update(glm_3_alt, . ~ . + Customer_Age:Months_on_book + Total_Revolving_Bal:Total_Trans_Ct)
summary(glm_4_alt)
glm_5_alt <- update(glm_4_alt, . ~ . - Income_Category - Card_Category - Education_Level - Marital_Status + Dependent_count:Total_Trans_Amt)
summary(glm_5_alt)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Amt_Ct_Chng_Q4_Q1)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Amt_Chng_Q4_Q1)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt)
summary(glm_8)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_8 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_8 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_8 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt + Total_Ct_Chng_Q4_Q1:Total_Trans_Ct)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt + Total_Ct_Chng_Q4_Q1:Months_Inactive_12_mon)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt + Total_Ct_Chng_Q4_Q1:Contacts_Count_12_mon)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt + Total_Ct_Chng_Q4_Q1:Contacts_Count_12_mon - Contacts_Count_12_mon)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt + Total_Ct_Chng_Q4_Q1:Income_Category)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Ct_Chng_Q4_Q1:Total_Trans_Amt)
summary(glm_8)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal)
summary(glm_8)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_8 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_8 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_8 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Trans_Amt:Total_Ct_Chng_Q4_Q1)
summary(glm_8)
View(glm_9)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_glm_8
hist(pred_glm_8)
table(bank_data$Dependent_count,bank_data$Attrition_Flag)
table(bank_data$Contacts_Count_12_mon,bank_data$Attrition_Flag)
glm_8 <- update(glm_7, . ~ . + Income_Category:Total_Revolving_Bal + Total_Trans_Amt:Total_Ct_Chng_Q4_Q1)
summary(glm_8)
glm_8 <- update(glm_7, . ~ .  + Total_Trans_Amt:Total_Ct_Chng_Q4_Q1)
summary(glm_8)
pred_glm_8 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_8 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_8 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_8 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
pred_glm_7 <- predict(glm_7,test_1,type="response")
pred_glm_7 <- predict(glm_7,test_1,type="response")
pred_1 <- ifelse(pred_glm_7 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_7 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_7 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
pred_glm_6 <- predict(glm_6,test_1,type="response")
pred_1 <- ifelse(pred_glm_6 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_6 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_6 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
mean(pred_1==test_1$Attrition_Flag)
mean(pred_2==test_1$Attrition_Flag)
mean(pred_3==test_1$Attrition_Flag)
pred_glm_6 <- predict(glm_8,test_1,type="response")
pred_1 <- ifelse(pred_glm_6 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_6 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_6 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
pred_glm_6 <- predict(glm_7,test_1,type="response")
pred_1 <- ifelse(pred_glm_6 > threshold1 , 1,0)
pred_2 <- ifelse(pred_glm_6 > threshold2 , 1,0)
pred_3 <- ifelse(pred_glm_6 > threshold3 , 1,0)
table(test_1$Attrition_Flag,pred_1)
table(test_1$Attrition_Flag,pred_2)
table(test_1$Attrition_Flag,pred_3)
summary(glm_6)
